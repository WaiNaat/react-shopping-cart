(self.webpackChunkreact_shopping_cart=self.webpackChunkreact_shopping_cart||[]).push([[535],{"./src/components/pages/ProductsPage/ProductStepper/ProductStepper.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},StepperTest:function(){return StepperTest},__namedExportsOrder:function(){return __namedExportsOrder}});var _Default$parameters,_Default$parameters2,_Default$parameters2$,_Default$parameters3,_Default$parameters3$,_StepperTest$paramete,_StepperTest$paramete2,_StepperTest$paramete3,_StepperTest$paramete4,_StepperTest$paramete5,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),recoil__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/recoil/es/index.js"),_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/testing-library/dist/esm/index.js"),_storybook_jest__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/jest/dist/esm/index.js"),_ProductStepper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/pages/ProductsPage/ProductStepper/ProductStepper.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),meta={title:"ProductStepper",component:_ProductStepper__WEBPACK_IMPORTED_MODULE_3__.Z,tags:["autodocs"],decorators:[function(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(recoil__WEBPACK_IMPORTED_MODULE_0__.Wh,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(Story,{})})}],parameters:{docs:{description:{component:"Stepper 컴포넌트"}}}};__webpack_exports__.default=meta;var _play,Default={args:{productId:1234,product:{id:1234,imageUrl:"",price:0,name:""}}},StepperTest={args:{productId:12345,product:{id:12345,imageUrl:"",price:0,name:""}},play:(_play=(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee6(_ref){var canvasElement,step,canvas,entryButton,input,upButton,downButton;return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return canvasElement=_ref.canvasElement,step=_ref.step,canvas=(0,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__.uh)(canvasElement),entryButton=canvas.getByLabelText("장바구니에 상품 추가하기"),_context6.next=5,step("장바구니를 누르면 장바구니 아이콘이 사라진다",(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee(){return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__.mV.click(entryButton);case 2:(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(entryButton).not.toBeVisible();case 3:case"end":return _context.stop()}}),_callee)}))));case 5:return input=canvas.getByRole("textbox"),upButton=canvas.getByLabelText("상품 1개 추가"),downButton=canvas.getByLabelText("상품 1개 삭제"),_context6.next=10,step("장바구니가 사라지면, Stepper가 나온다",(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee2(){return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(input).toBeVisible(),(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(upButton).toBeVisible(),(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(downButton).toBeVisible();case 3:case"end":return _context2.stop()}}),_callee2)}))));case 10:return _context6.next=12,step("Up 버튼을 클릭하면, 장바구니에 상품 개수가 늘어난다",(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee3(){var value;return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__.mV.click(upButton);case 2:value=input.value,(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(value).toEqual("2");case 4:case"end":return _context3.stop()}}),_callee3)}))));case 12:return _context6.next=14,step("Down 버튼을 클릭하면, 장바구니의 상품 개수가 줄어든다",(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee4(){var value;return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__.mV.click(downButton);case 2:value=input.value,(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(value).toEqual("1");case 4:case"end":return _context4.stop()}}),_callee4)}))));case 14:return _context6.next=16,step("Down 버튼을 클릭해 상품이 0개가 되면 Stepper가 사라지고 장바구니 아이콘이 나온다",(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().mark((function _callee5(){return(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_6__.Z)().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_1__.mV.click(downButton);case 2:(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(input).not.toBeVisible(),(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(upButton).not.toBeVisible(),(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_2__.l)(downButton).not.toBeVisible();case 5:case"end":return _context5.stop()}}),_callee5)}))));case 16:case"end":return _context6.stop()}}),_callee6)}))),function play(_x){return _play.apply(this,arguments)})};Default.parameters=(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},Default.parameters),{},{docs:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({originalSource:"{\n  args: {\n    productId: 1234,\n    product: {\n      id: 1234,\n      imageUrl: '',\n      price: 0,\n      name: ''\n    }\n  }\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source),description:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({story:"Default 스토리"},null===(_Default$parameters3=Default.parameters)||void 0===_Default$parameters3||null===(_Default$parameters3$=_Default$parameters3.docs)||void 0===_Default$parameters3$?void 0:_Default$parameters3$.description)})}),StepperTest.parameters=(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},StepperTest.parameters),{},{docs:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},null===(_StepperTest$paramete=StepperTest.parameters)||void 0===_StepperTest$paramete?void 0:_StepperTest$paramete.docs),{},{source:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({originalSource:"{\n  args: {\n    productId: 12345,\n    product: {\n      id: 12345,\n      imageUrl: '',\n      price: 0,\n      name: ''\n    }\n  },\n  play: async ({\n    canvasElement,\n    step\n  }) => {\n    const canvas = within(canvasElement);\n    const entryButton = canvas.getByLabelText('장바구니에 상품 추가하기');\n    await step('장바구니를 누르면 장바구니 아이콘이 사라진다', async () => {\n      await userEvent.click(entryButton);\n      expect(entryButton).not.toBeVisible();\n    });\n    const input = (canvas.getByRole('textbox') as HTMLInputElement);\n    const upButton = canvas.getByLabelText('상품 1개 추가');\n    const downButton = canvas.getByLabelText('상품 1개 삭제');\n    await step('장바구니가 사라지면, Stepper가 나온다', async () => {\n      expect(input).toBeVisible();\n      expect(upButton).toBeVisible();\n      expect(downButton).toBeVisible();\n    });\n    await step('Up 버튼을 클릭하면, 장바구니에 상품 개수가 늘어난다', async () => {\n      await userEvent.click(upButton);\n      const {\n        value\n      } = input;\n      expect(value).toEqual('2');\n    });\n    await step('Down 버튼을 클릭하면, 장바구니의 상품 개수가 줄어든다', async () => {\n      await userEvent.click(downButton);\n      const {\n        value\n      } = input;\n      expect(value).toEqual('1');\n    });\n    await step('Down 버튼을 클릭해 상품이 0개가 되면 Stepper가 사라지고 장바구니 아이콘이 나온다', async () => {\n      await userEvent.click(downButton);\n      expect(input).not.toBeVisible();\n      expect(upButton).not.toBeVisible();\n      expect(downButton).not.toBeVisible();\n    });\n  }\n}"},null===(_StepperTest$paramete2=StepperTest.parameters)||void 0===_StepperTest$paramete2||null===(_StepperTest$paramete3=_StepperTest$paramete2.docs)||void 0===_StepperTest$paramete3?void 0:_StepperTest$paramete3.source),description:(0,C_Users_Q_Documents_GitHub_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({story:"상품을 추가하고 삭제하는 스토리"},null===(_StepperTest$paramete4=StepperTest.parameters)||void 0===_StepperTest$paramete4||null===(_StepperTest$paramete5=_StepperTest$paramete4.docs)||void 0===_StepperTest$paramete5?void 0:_StepperTest$paramete5.description)})});var __namedExportsOrder=["Default","StepperTest"];try{Default.displayName="Default",Default.__docgenInfo={description:"Default 스토리",displayName:"Default",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pages/ProductsPage/ProductStepper/ProductStepper.stories.tsx#Default"]={docgenInfo:Default.__docgenInfo,name:"Default",path:"src/components/pages/ProductsPage/ProductStepper/ProductStepper.stories.tsx#Default"})}catch(__react_docgen_typescript_loader_error){}try{StepperTest.displayName="StepperTest",StepperTest.__docgenInfo={description:"상품을 추가하고 삭제하는 스토리",displayName:"StepperTest",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pages/ProductsPage/ProductStepper/ProductStepper.stories.tsx#StepperTest"]={docgenInfo:StepperTest.__docgenInfo,name:"StepperTest",path:"src/components/pages/ProductsPage/ProductStepper/ProductStepper.stories.tsx#StepperTest"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/pages/ProductsPage/ProductStepper/ProductStepper.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ProductStepper_ProductStepper}});var _templateObject,toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/recoil/es/index.js"),taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),ProductStepper_styled_ProductStepper=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),assets=__webpack_require__("./src/assets/index.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),StepperEntryButton=function StepperEntryButton(props){var onClick=props.onClick;return(0,jsx_runtime.jsx)("button",{type:"button",onClick:onClick,"aria-label":"장바구니에 상품 추가하기",children:(0,jsx_runtime.jsx)(assets.$L,{})})},StepperEntryButton_StepperEntryButton=StepperEntryButton;try{StepperEntryButton.displayName="StepperEntryButton",StepperEntryButton.__docgenInfo={description:"",displayName:"StepperEntryButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pages/ProductsPage/StepperEntryButton/StepperEntryButton.tsx#StepperEntryButton"]={docgenInfo:StepperEntryButton.__docgenInfo,name:"StepperEntryButton",path:"src/components/pages/ProductsPage/StepperEntryButton/StepperEntryButton.tsx#StepperEntryButton"})}catch(__react_docgen_typescript_loader_error){}var Stepper=__webpack_require__("./src/components/commons/Stepper/Stepper.tsx"),useStepper=__webpack_require__("./src/hooks/useStepper.ts"),StepperSettings=__webpack_require__("./src/constants/StepperSettings.ts"),cartToggleState=__webpack_require__("./src/recoil/cartToggleState.ts"),usePreviousValue=__webpack_require__("./src/hooks/usePreviousValue.ts"),cartState=__webpack_require__("./src/recoil/cartState.ts"),MIN=StepperSettings.Z.MIN,MAX=StepperSettings.Z.MAX,STEP=StepperSettings.Z.STEP,ProductStepper=function ProductStepper(props){var productId=props.productId,product=props.product,defaultValue=(0,es.sJ)((0,cartState.Il)(productId)),_useStepper=(0,useStepper.Z)(MIN,MAX,STEP,defaultValue),value=_useStepper.value,increaseValue=_useStepper.increaseValue,decreaseValue=_useStepper.decreaseValue,setValue=_useStepper.setValue,prevValue=(0,usePreviousValue.Z)(value),updateProductQuantity=(0,es.Zl)((0,cartState.Il)(productId)),setCartState=(0,es.Zl)(cartState.ZP),toggleSetter=(0,es.Zl)((0,cartToggleState.eE)(productId)),deleteToggleInfo=(0,es.rb)((0,cartToggleState.eE)(productId));return(0,react.useEffect)((function(){if(prevValue!==value)return 0===prevValue&&value>0?(toggleSetter(!0),void fetch("/cart-items",{method:"POST",body:JSON.stringify({productId:productId})})):0===value?(deleteToggleInfo(),void fetch("/cart-items/".concat(productId),{method:"DELETE"})):void fetch("/cart-items/".concat(productId),{method:"PATCH",body:JSON.stringify({quantity:value})})}),[value]),(0,react.useEffect)((function(){0===prevValue&&value>0?setCartState((function(prevCart){return[].concat((0,toConsumableArray.Z)(prevCart),[{product:product,id:productId,quantity:value}])})):updateProductQuantity(value)}),[value]),(0,jsx_runtime.jsx)(ProductStepper_styled_ProductStepper,{children:value?(0,jsx_runtime.jsx)(Stepper.Z,{value:value,increaseValue:increaseValue,decreaseValue:decreaseValue,setValue:setValue}):(0,jsx_runtime.jsx)(StepperEntryButton_StepperEntryButton,{onClick:increaseValue})})},ProductStepper_ProductStepper=react.memo(ProductStepper);try{ProductStepper.displayName="ProductStepper",ProductStepper.__docgenInfo={description:"",displayName:"ProductStepper",props:{productId:{defaultValue:null,description:"",name:"productId",required:!0,type:{name:"number"}},product:{defaultValue:null,description:"",name:"product",required:!0,type:{name:"Product"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pages/ProductsPage/ProductStepper/ProductStepper.tsx#ProductStepper"]={docgenInfo:ProductStepper.__docgenInfo,name:"ProductStepper",path:"src/components/pages/ProductsPage/ProductStepper/ProductStepper.tsx#ProductStepper"})}catch(__react_docgen_typescript_loader_error){}},"?4f7e":function(){}}]);